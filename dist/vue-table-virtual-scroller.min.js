var VueTableVirtualScroller=function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var n={name:"VTableHeader",components:{VTableHeaderColumn:{name:"VTableHeaderColumn",props:{column:{type:Object,default:function(){}},columnIndex:{type:Number,default:0}},inject:["table"],computed:{width:function(){return this.column.width||(this.column.minWidth||80)+this.table.offset},columnClass:function(){var e="v-table_1_column_".concat(this.columnIndex+1);return this.column.fixed&&this.table.bodyOverflowX&&(e+=" is--fixed-".concat(this.column.fixed)),this.column.labelClassName&&(e+=" ".concat(this.column.labelClassName)),e}},render:function(e){var t=this.column,i=this.columnIndex,n=this.column.renderHeader(e,{column:t,$index:i})||this.column.header||("selection"===this.column.type?this.renderSelection(e):"index"===this.column.type?this.column.label||"#":this.column.label);return e("div",{class:this.columnClass,style:this.table.setColumnStyle(this.column,this.columnIndex,this.width)},[e("div",{class:"cell"},[n])])},methods:{renderSelection:function(e){return e("el-checkbox",{attrs:{value:this.table.selectionAll,key:this.index,indeterminate:this.table.indeterminate},on:{change:this.selectionChange}})},selectionChange:function(e){this.table.$emit("all.selection.change",e)}}}},inject:["table"],watch:{"table.bodyScrollLeft":function(e){this.$el.scrollLeft=e}},render:function(e){var t=this.table.columnsSort.reduce((function(t,i,n){var o=e("VTableHeaderColumn",{attrs:{column:i,columnIndex:n}});return t.concat([o])}),[]);return e("div",{class:"v-table__header-container",ref:"headerWrapper"},[e("div",{class:"v-table__header",style:this.table.rowStyle,ref:"header"},[t])])},mounted:function(){var e=this;this.$nextTick((function(){var t=e.$refs.headerWrapper,i=e.$refs.header,n=t.getBoundingClientRect().width,o=i.getBoundingClientRect().width;e.table.bodyOverflowX=o>n}))}},o={itemsLimit:1e3};var r=void 0;function s(){s.init||(s.init=!0,r=-1!==function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var i=e.indexOf("rv:");return parseInt(e.substring(i+3,e.indexOf(".",i)),10)}var n=e.indexOf("Edge/");return n>0?parseInt(e.substring(n+5,e.indexOf(".",n)),10):-1}())}var l={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"resize-observer",attrs:{tabindex:"-1"}})},staticRenderFns:[],_scopeId:"data-v-b329ee4c",name:"resize-observer",methods:{compareAndNotify:function(){this._w===this.$el.offsetWidth&&this._h===this.$el.offsetHeight||(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.$emit("notify"))},addResizeHandlers:function(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers:function(){this._resizeObject&&this._resizeObject.onload&&(!r&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),delete this._resizeObject.onload)}},mounted:function(){var e=this;s(),this.$nextTick((function(){e._w=e.$el.offsetWidth,e._h=e.$el.offsetHeight}));var t=document.createElement("object");this._resizeObject=t,t.setAttribute("aria-hidden","true"),t.setAttribute("tabindex",-1),t.onload=this.addResizeHandlers,t.type="text/html",r&&this.$el.appendChild(t),t.data="about:blank",r||this.$el.appendChild(t)},beforeDestroy:function(){this.removeResizeHandlers()}};var a={version:"0.4.5",install:function(e){e.component("resize-observer",l),e.component("ResizeObserver",l)}},c=null;"undefined"!=typeof window?c=window.Vue:"undefined"!=typeof global&&(c=global.Vue),c&&c.use(a);var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},u=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),f=function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)};var m=function(){function e(t,i,n){h(this,e),this.el=t,this.observer=null,this.frozen=!1,this.createObserver(i,n)}return u(e,[{key:"createObserver",value:function(e,t){var i,n,o,r,s,l,a,c=this;(this.observer&&this.destroyObserver(),this.frozen)||(this.options="function"==typeof(i=e)?{callback:i}:i,this.callback=this.options.callback,this.callback&&this.options.throttle&&(this.callback=(n=this.callback,o=this.options.throttle,r=void 0,s=void 0,l=void 0,(a=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];l=i,r&&e===s||(s=e,clearTimeout(r),r=setTimeout((function(){n.apply(void 0,[e].concat(f(l))),r=0}),o))})._clear=function(){clearTimeout(r)},a)),this.oldResult=void 0,this.observer=new IntersectionObserver((function(e){var t=e[0];if(c.callback){var i=t.isIntersecting&&t.intersectionRatio>=c.threshold;if(i===c.oldResult)return;c.oldResult=i,c.callback(i,t),i&&c.options.once&&(c.frozen=!0,c.destroyObserver())}}),this.options.intersection),t.context.$nextTick((function(){c.observer.observe(c.el)})))}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&this.options.intersection.threshold||0}}]),e}();function v(e,t,i){var n=t.value;if("undefined"==typeof IntersectionObserver)console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var o=new m(e,n,i);e._vue_visibilityState=o}}var p={bind:v,update:function(e,t,i){var n=t.value;if(!function e(t,i){if(t===i)return!0;if("object"===(void 0===t?"undefined":d(t))){for(var n in t)if(!e(t[n],i[n]))return!1;return!0}return!1}(n,t.oldValue)){var o=e._vue_visibilityState;o?o.createObserver(n,i):v(e,{value:n},i)}},unbind:function(e){var t=e._vue_visibilityState;t&&(t.destroyObserver(),delete e._vue_visibilityState)}};var y={version:"0.4.3",install:function(e){e.directive("observe-visibility",p)}},b=null;"undefined"!=typeof window?b=window.Vue:"undefined"!=typeof global&&(b=global.Vue),b&&b.use(y);var g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var w=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){var t,i;t=g,i=function(){var e=/(auto|scroll)/,t=function(e,i){return null===e.parentNode?i:t(e.parentNode,i.concat([e]))},i=function(e,t){return getComputedStyle(e,null).getPropertyValue(t)},n=function(t){return e.test(function(e){return i(e,"overflow")+i(e,"overflow-y")+i(e,"overflow-x")}(t))};return function(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var i=t(e.parentNode,[]),o=0;o<i.length;o+=1)if(n(i[o]))return i[o];return document.scrollingElement||document.documentElement}}},e.exports?e.exports=i():t.Scrollparent=i()})),S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e},$=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},x={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(e){return["vertical","horizontal"].includes(e)}}};function C(){return this.items.length&&"object"!==S(this.items[0])}var z=!1;if("undefined"!=typeof window){z=!1;try{var O=Object.defineProperty({},"passive",{get:function(){z=!0}});window.addEventListener("test",null,O)}catch(e){}}var k=0,T={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:e.handleVisibilityChange,expression:"handleVisibilityChange"}],staticClass:"vue-recycle-scroller",class:_({ready:e.ready,"page-mode":e.pageMode},"direction-"+e.direction,!0),on:{"&scroll":function(t){return e.handleScroll(t)}}},[e.$slots.before?i("div",{staticClass:"vue-recycle-scroller__slot"},[e._t("before")],2):e._e(),e._v(" "),i("div",{ref:"wrapper",staticClass:"vue-recycle-scroller__item-wrapper",style:_({},"vertical"===e.direction?"minHeight":"minWidth",e.totalSize+"px")},e._l(e.pool,(function(t){return i("div",{key:t.nr.id,staticClass:"vue-recycle-scroller__item-view",class:{hover:e.hoverKey===t.nr.key},style:e.ready?{transform:"translate"+("vertical"===e.direction?"Y":"X")+"("+t.position+"px)"}:null,on:{mouseenter:function(i){e.hoverKey=t.nr.key},mouseleave:function(t){e.hoverKey=null}}},[e._t("default",null,{item:t.item,index:t.nr.index,active:t.nr.used})],2)})),0),e._v(" "),e.$slots.after?i("div",{staticClass:"vue-recycle-scroller__slot"},[e._t("after")],2):e._e(),e._v(" "),i("ResizeObserver",{on:{notify:e.handleResize}})],1)},staticRenderFns:[],name:"RecycleScroller",components:{ResizeObserver:l},directives:{ObserveVisibility:p},props:$({},x,{itemSize:{type:Number,default:null},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1}}),data:function(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes:function(){if(null===this.itemSize){for(var e={"-1":{accumulator:0}},t=this.items,i=this.sizeField,n=this.minItemSize,o=0,r=void 0,s=0,l=t.length;s<l;s++)o+=r=t[s][i]||n,e[s]={accumulator:o,size:r};return e}return[]},simpleArray:C},watch:{items:function(){this.updateVisibleItems(!0)},pageMode:function(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler:function(){this.updateVisibleItems(!1)},deep:!0}},created:function(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$isServer&&this.updateVisibleItems(!1)},mounted:function(){var e=this;this.applyPageMode(),this.$nextTick((function(){e.updateVisibleItems(!0),e.ready=!0}))},beforeDestroy:function(){this.removeListeners()},methods:{addView:function(e,t,i,n,o){var r={item:i,position:0},s={id:k++,index:t,used:!0,key:n,type:o};return Object.defineProperty(r,"nr",{configurable:!1,value:s}),e.push(r),r},unuseView:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.$_unusedViews,n=e.nr.type,o=i.get(n);o||(o=[],i.set(n,o)),o.push(e),t||(e.nr.used=!1,e.position=-9999,this.$_views.delete(e.nr.key))},handleResize:function(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll:function(e){var t=this;this.$_scrollDirty||(this.$_scrollDirty=!0,requestAnimationFrame((function(){t.$_scrollDirty=!1,t.updateVisibleItems(!1).continuous||(clearTimeout(t.$_refreshTimout),t.$_refreshTimout=setTimeout(t.handleScroll,100))})))},handleVisibilityChange:function(e,t){var i=this;this.ready&&(e||0!==t.boundingClientRect.width||0!==t.boundingClientRect.height?(this.$emit("visible"),requestAnimationFrame((function(){i.updateVisibleItems(!1)}))):this.$emit("hidden"))},updateVisibleItems:function(e){var t=this.itemSize,i=this.typeField,n=this.simpleArray?null:this.keyField,r=this.items,s=r.length,l=this.sizes,a=this.$_views,c=this.$_unusedViews,d=this.pool,h=void 0,u=void 0,f=void 0;if(s)if(this.$isServer)h=0,u=this.prerender,f=null;else{var m=this.getScroll(),v=this.buffer;if(m.start-=v,m.end+=v,null===t){var p=0,y=s-1,b=~~(s/2),g=void 0;do{g=b,l[b].accumulator<m.start?p=b:b<s-1&&l[b+1].accumulator>m.start&&(y=b),b=~~((p+y)/2)}while(b!==g);for(b<0&&(b=0),h=b,f=l[s-1].accumulator,u=b;u<s&&l[u].accumulator<m.end;u++);-1===u?u=r.length-1:++u>s&&(u=s)}else(h=~~(m.start/t))<0&&(h=0),(u=Math.ceil(m.end/t))>s&&(u=s),f=s*t}else h=u=f=0;u-h>o.itemsLimit&&this.itemsLimitError(),this.totalSize=f;var w=void 0,S=h<=this.$_endIndex&&u>=this.$_startIndex,_=void 0;if(this.$_continuous!==S){if(S){a.clear(),c.clear();for(var $=0,x=d.length;$<x;$++)w=d[$],this.unuseView(w)}this.$_continuous=S}else if(S)for(var C=0,z=d.length;C<z;C++)(w=d[C]).nr.used&&(e&&(w.nr.index=r.findIndex((function(e){return n?e[n]===w.item[n]:e===w.item}))),(-1===w.nr.index||w.nr.index<h||w.nr.index>=u)&&this.unuseView(w));S||(_=new Map);for(var O=void 0,k=void 0,T=void 0,D=void 0,I=h;I<u;I++){O=r[I];var V=n?O[n]:O;w=a.get(V),t||l[I].size?(w?(w.nr.used=!0,w.item=O):(k=O[i],S?(T=c.get(k))&&T.length?((w=T.pop()).item=O,w.nr.used=!0,w.nr.index=I,w.nr.key=V,w.nr.type=k):w=this.addView(d,I,O,V,k):(T=c.get(k),D=_.get(k)||0,T&&D<T.length?((w=T[D]).item=O,w.nr.used=!0,w.nr.index=I,w.nr.key=V,w.nr.type=k,_.set(k,D+1)):(w=this.addView(d,I,O,V,k),this.unuseView(w,!0)),D++),a.set(V,w)),w.position=null===t?l[I-1].accumulator:I*t):w&&this.unuseView(w)}return this.$_startIndex=h,this.$_endIndex=u,this.emitUpdate&&this.$emit("update",h,u),{continuous:S}},getListenerTarget:function(){var e=w(this.$el);return!window.document||e!==window.document.documentElement&&e!==window.document.body||(e=window),e},getScroll:function(){var e=this.$el,t="vertical"===this.direction,i=void 0;if(this.pageMode){var n=e.getBoundingClientRect(),o=t?n.height:n.width,r=-(t?n.top:n.left),s=t?window.innerHeight:window.innerWidth;r<0&&(s+=r,r=0),r+s>o&&(s=o-r),i={start:r,end:r+s}}else i=t?{start:e.scrollTop,end:e.scrollTop+e.clientHeight}:{start:e.scrollLeft,end:e.scrollLeft+e.clientWidth};return i},applyPageMode:function(){this.pageMode?this.addListeners():this.removeListeners()},addListeners:function(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,!!z&&{passive:!0}),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners:function(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem:function(e){var t=void 0;t=null===this.itemSize?e>0?this.sizes[e-1].accumulator:0:e*this.itemSize,this.scrollToPosition(t)},scrollToPosition:function(e){"vertical"===this.direction?this.$el.scrollTop=e:this.$el.scrollLeft=e},itemsLimitError:function(){var e=this;throw setTimeout((function(){console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",e.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")})),new Error("Rendered items limit reached")}}},D={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("RecycleScroller",e._g(e._b({ref:"scroller",attrs:{items:e.itemsWithSize,"min-item-size":e.minItemSize,direction:e.direction,"key-field":"id"},on:{resize:e.onScrollerResize,visible:e.onScrollerVisible},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item,n=t.index,o=t.active;return[e._t("default",null,null,{item:i.item,index:n,active:o,itemWithSize:i})]}}])},"RecycleScroller",e.$attrs,!1),e.listeners),[i("template",{slot:"before"},[e._t("before")],2),e._v(" "),i("template",{slot:"after"},[e._t("after")],2)],2)},staticRenderFns:[],name:"DynamicScroller",components:{RecycleScroller:T},inheritAttrs:!1,provide:function(){return{vscrollData:this.vscrollData,vscrollParent:this}},props:$({},x,{minItemSize:{type:[Number,String],required:!0}}),data:function(){return{vscrollData:{active:!0,sizes:{},validSizes:{},keyField:this.keyField,simpleArray:!1}}},computed:{simpleArray:C,itemsWithSize:function(){for(var e=[],t=this.items,i=this.keyField,n=this.simpleArray,o=this.vscrollData.sizes,r=0;r<t.length;r++){var s=t[r],l=n?r:s[i],a=o[l];void 0!==a||this.$_undefinedMap[l]||(this.$_undefinedSizes++,this.$_undefinedMap[l]=!0,a=0),e.push({item:s,id:l,size:a})}return e},listeners:function(){var e={};for(var t in this.$listeners)"resize"!==t&&"visible"!==t&&(e[t]=this.$listeners[t]);return e}},watch:{items:function(){this.forceUpdate(!1)},simpleArray:{handler:function(e){this.vscrollData.simpleArray=e},immediate:!0},direction:function(e){this.forceUpdate(!0)}},created:function(){this.$_updates=[],this.$_undefinedSizes=0,this.$_undefinedMap={}},activated:function(){this.vscrollData.active=!0},deactivated:function(){this.vscrollData.active=!1},methods:{onScrollerResize:function(){this.$refs.scroller&&this.forceUpdate(),this.$emit("resize")},onScrollerVisible:function(){this.$emit("vscroll:update",{force:!1}),this.$emit("visible")},forceUpdate:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(e||this.simpleArray)&&(this.vscrollData.validSizes={}),this.$emit("vscroll:update",{force:!0})},scrollToItem:function(e){var t=this.$refs.scroller;t&&t.scrollToItem(e)},getItemSize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=this.simpleArray?null!=t?t:this.items.indexOf(e):e[this.keyField];return this.vscrollData.sizes[i]||0},scrollToBottom:function(){var e=this;if(!this.$_scrollingToBottom){this.$_scrollingToBottom=!0;var t=this.$el;this.$nextTick((function(){requestAnimationFrame((function i(){t.scrollTop=t.scrollHeight,0===e.$_undefinedSizes?e.$_scrollingToBottom=!1:requestAnimationFrame(i)}))}))}}}},I={name:"DynamicScrollerItem",inject:["vscrollData","vscrollParent"],props:{item:{required:!0},watchData:{type:Boolean,default:!1},active:{type:Boolean,required:!0},index:{type:Number,default:void 0},sizeDependencies:{type:[Array,Object],default:null},emitResize:{type:Boolean,default:!1},tag:{type:String,default:"div"}},computed:{id:function(){return this.vscrollData.simpleArray?this.index:this.item[this.vscrollData.keyField]},size:function(){return this.vscrollData.validSizes[this.id]&&this.vscrollData.sizes[this.id]||0}},watch:{watchData:"updateWatchData",id:function(){this.size||this.onDataUpdate()},active:function(e){e&&this.$_pendingVScrollUpdate===this.id&&this.updateSize()}},created:function(){var e=this;if(!this.$isServer){this.$_forceNextVScrollUpdate=null,this.updateWatchData();var t=function(t){e.$watch((function(){return e.sizeDependencies[t]}),e.onDataUpdate)};for(var i in this.sizeDependencies)t(i);this.vscrollParent.$on("vscroll:update",this.onVscrollUpdate),this.vscrollParent.$on("vscroll:update-size",this.onVscrollUpdateSize)}},mounted:function(){this.vscrollData.active&&this.updateSize()},beforeDestroy:function(){this.vscrollParent.$off("vscroll:update",this.onVscrollUpdate),this.vscrollParent.$off("vscroll:update-size",this.onVscrollUpdateSize)},methods:{updateSize:function(){this.active&&this.vscrollData.active?this.$_pendingSizeUpdate!==this.id&&(this.$_pendingSizeUpdate=this.id,this.$_forceNextVScrollUpdate=null,this.$_pendingVScrollUpdate=null,this.active&&this.vscrollData.active&&this.computeSize(this.id)):this.$_forceNextVScrollUpdate=this.id},getBounds:function(){return this.$el.getBoundingClientRect()},updateWatchData:function(){var e=this;this.watchData?this.$_watchData=this.$watch("data",(function(){e.onDataUpdate()}),{deep:!0}):this.$_watchData&&(this.$_watchData(),this.$_watchData=null)},onVscrollUpdate:function(e){var t=e.force;!this.active&&t&&(this.$_pendingVScrollUpdate=this.id),this.$_forceNextVScrollUpdate!==this.id&&!t&&this.size||this.updateSize()},onDataUpdate:function(){this.updateSize()},computeSize:function(e){var t=this;this.$nextTick((function(){if(t.id===e){var i=t.getBounds(),n=Math.round("vertical"===t.vscrollParent.direction?i.height:i.width);n&&t.size!==n&&(t.vscrollParent.$_undefinedMap[e]&&(t.vscrollParent.$_undefinedSizes--,t.vscrollParent.$_undefinedMap[e]=void 0),t.$set(t.vscrollData.sizes,t.id,n),t.$set(t.vscrollData.validSizes,t.id,!0),t.emitResize&&t.$emit("resize",t.id))}t.$_pendingSizeUpdate=null}))}},render:function(e){return e(this.tag,this.$slots.default)}};var V={version:"1.0.0-rc.2",install:function(e,t){var i=Object.assign({},{installComponents:!0,componentsPrefix:""},t);for(var n in i)void 0!==i[n]&&(o[n]=i[n]);i.installComponents&&function(e,t){e.component(t+"recycle-scroller",T),e.component(t+"RecycleScroller",T),e.component(t+"dynamic-scroller",D),e.component(t+"DynamicScroller",D),e.component(t+"dynamic-scroller-item",I),e.component(t+"DynamicScrollerItem",I)}(e,i.componentsPrefix)}},R=null;"undefined"!=typeof window?R=window.Vue:"undefined"!=typeof global&&(R=global.Vue),R&&R.use(V);var W={name:"TableBody",components:{TableBodyColumn:{name:"TableBodyColumn",props:{index:{type:Number,default:0},item:{type:Object,default:function(){}},column:{type:Object,default:function(){}},columnIndex:{type:Number,default:0}},inject:["table"],data:function(){return{checked:!1,columnId:null}},render:function(e){var t=this,i=this.renderSlot(e)||("selection"===this.column.type?this.renderSelection(e):"index"===this.column.type?this.renderIndex():this.column.prop?this.item[this.column.prop]:"");return e("div",{class:this.columnClass,style:this.table.setColumnStyle(this.column,this.columnIndex,this.width),on:{mouseenter:function(e){return t.handleMouseenter(e,i)},mouseleave:function(e){return t.handleMouseleave(e,i)}}},[e("div",{class:{cell:!0,"v-tooltip":this.showOverflowTooltip},ref:"cell"},[i])])},computed:{width:function(){return this.column.width||(this.column.minWidth||80)+this.table.offset},showOverflowTooltip:function(){return this.table.showOverflowTooltip||this.column.showOverflowTooltip},columnClass:function(){var e="v-table_".concat(this.index+1,"_column_").concat(this.columnIndex+1);return this.column.fixed&&this.table.bodyOverflowX&&(e+=" is--fixed-".concat(this.column.fixed)),this.column.className&&(e+=" ".concat(this.column.className)),e}},methods:{renderSelection:function(e){return e("el-checkbox",{attrs:{value:this.table.isChecked(this.index),key:this.index},on:{change:this.selectionRowChange}})},handleMouseenter:function(e,t){var i=this.item,n=this.column,o=this.$refs.cell;if(this.table.$emit("cell.mouse.enter",i,n,o,e,t),o.classList.contains("v-tooltip")||!o.childNodes.length){var r=document.createRange();r.setStart(o,0),r.setEnd(o,o.childNodes.length);var s=r.getBoundingClientRect().width;parseInt(this.getStyle(o,"paddingLeft"))+parseInt(this.getStyle(o,"paddingRight"))+s>this.width&&(this.table.show=!0,this.table.reference=o,this.table.popoverSlot=t)}},getStyle:function(e,t){return t&&(t=t.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}))),window.getComputedStyle(e,null).getPropertyValue(t)},handleMouseleave:function(e,t){var i=this.item,n=this.column,o=this.$refs.cell;this.table.$emit("cell.mouse.leave",i,n,o,e,t),this.table.show=!1},renderIndex:function(){return this.index+1},renderSlot:function(e){return this.column.renderSlot(e,{row:this.item,$index:this.index})},selectionRowChange:function(e){this.table.$emit("row.selection.change",this.index,e)}}}},props:{item:{type:Object,default:function(){}},index:Number},inject:["table"],render:function(e){var t=this,i=this.table.columnsSort.reduce((function(i,n,o){var r=t.item,s=t.index,l=e("TableBodyColumn",{attrs:{item:r,index:s,column:n,columnIndex:o}});return i.concat([l])}),[]),n="v-table__body";return this.table.currentRow===this.index&&(n+=" current-row"),e("div",{class:n,style:this.table.rowStyle,on:{click:function(e){return t.handleClick(e)},dblclick:function(e){return t.handleDoubleClick(e)}}},[i])},methods:{handleClick:function(e){this.table.highlightCurrentRow&&(this.table.currentRow=this.index),this.handleEvent(e,"click")},handleDoubleClick:function(e){this.handleEvent(e,"dblclick")},handleEvent:function(e,t){var i,n=this.table,o=function(e){for(var t=e.target;t&&"HTML"!==t.tagName.toUpperCase();){if(/v-table_\d_column_\d/.test(t.className))return t;t=t.parentNode}return null}(e);o&&(i=function(e,t){if((t.className||"").match(/v-table_[^\s]+/gm)){var i=t.className.split("_");return function(e,t){var i=null;return e.columns.forEach((function(e){e.columnId===+t&&(i=e)})),i}(e,i[i.length-1])}return null}(n,o))&&n.$emit("cell-".concat(t),this.item,i,o,e),n.$emit("row-".concat(t),this.item,i,e)}}},A=document.addEventListener?function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e&&t&&i&&e.addEventListener(t,i,n)}:function(e,t,i){e&&t&&i&&e.attachEvent("on"+t,i)},N=document.removeEventListener?function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e&&t&&e.removeEventListener(t,i,n)}:function(e,t,i){e&&t&&e.detachEvent("on"+t,i)},E=function(e){e||console.error("获取id节点失败");var t=e.getBoundingClientRect(),i=t.top,n=t.bottom,o=t.left,r=t.right,s=t.width||r-o,l=t.height||n-i;return{width:s,height:l,top:i,right:r,bottom:n,left:o,centerX:o+s/2,centerY:i+l/2}};var L=function(e,t,i,n,o,r,s,l,a,c){"boolean"!=typeof s&&(a=l,l=s,s=!1);var d,h="function"==typeof i?i.options:i;if(e&&e.render&&(h.render=e.render,h.staticRenderFns=e.staticRenderFns,h._compiled=!0,o&&(h.functional=!0)),n&&(h._scopeId=n),r?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,a(e)),e&&e._registeredComponents&&e._registeredComponents.add(r)},h._ssrRegister=d):t&&(d=s?function(){t.call(this,c(this.$root.$options.shadowRoot))}:function(e){t.call(this,l(e))}),d)if(h.functional){var u=h.render;h.render=function(e,t){return d.call(t),u(e,t)}}else{var f=h.beforeCreate;h.beforeCreate=f?[].concat(f,d):[d]}return i},j=L({render:function(){var e=this.$createElement,t=this._self._c||e;return t("DynamicScroller",{ref:"DynamicScroller",staticClass:"v-scroller",style:this.style,attrs:{"key-field":this.table.keyField,"content-tag":"table",items:this.data,"min-item-size":50},on:{update:this.update},scopedSlots:this._u([{key:"default",fn:function(e){var i=e.item,n=e.index,o=e.active;return[t("DynamicScrollerItem",{attrs:{item:i,active:o,"size-dependencies":[i.message],"data-index":n}},[t("v-table-body",{attrs:{item:i,index:n}})],1)]}}])})},staticRenderFns:[]},void 0,{components:{DynamicScroller:D,DynamicScrollerItem:I,VTableBody:W},props:{data:{type:Array,default:function(){return[]}}},inject:["table"],computed:{style:function(){var e=parseInt(this.table.height),t=parseInt(this.table.maxHeight);return{"--width":this.table.minWidth+"px",height:e?e+"px":"",maxHeight:t?t+"px":""}}},mounted:function(){A(this.$el,"scroll",this.handleScroll),this.addEmpty()},beforeDestroy:function(){N(this.$el,"scroll",this.handleScroll)},methods:{forceUpdate:function(){this.$refs.DynamicScroller.forceUpdate()},update:function(e,t){},handleScroll:function(e){this.table.bodyScrollLeft=e.target.scrollLeft},addEmpty:function(){var e=this.$el.querySelector(".vue-recycle-scroller__item-wrapper");!e.offsetHeight&&(e.innerHTML='<div id="empty" class="empty-text">'.concat(this.table.emptyText,"</div>"))}}},"data-v-de5c7972",!1,void 0,!1,void 0,void 0,void 0),P={data:function(){return{leftWidth:0,rightWidth:0,columns:[],columnsWidth:[],columnCalcWidthLenght:0}},created:function(){this.$on("insert.column",this.insertColumn),this.$on("remove.column",this.removeColumn)},computed:{columnsSort:function(){return this.columns.filter((function(e){return"left"===e.fixed})).concat(this.columns.filter((function(e){return"left"!==e.fixed&&"right"!==e.fixed}))).concat(this.columns.filter((function(e){return"right"===e.fixed})))}},methods:{insertColumn:function(e){var t=e.width,i=e.minWidth,n=t||i||80;!t&&this.columnCalcWidthLenght++,e.fixed&&(this["".concat(e.fixed,"Width")]+=n);var o=this.$slots.default.filter((function(e){return e.tag})).findIndex((function(t){return JSON.stringify(e)===JSON.stringify(t.componentInstance.columnConfig)}));e.columnId=o+1,this.columns.splice(o,0,e),this.columnsWidth.splice(o,0,n)},removeColumn:function(e){var t=this.columns.findIndex((function(t){return t.columnId===e.columnId}));if(-1!==t){var i=e.width,n=e.minWidth,o=i||n||80;!i&&this.columnCalcWidthLenght--,e.fixed&&(this["".concat(e.fixed,"Width")]-=o),this.columns.splice(t,1),this.columnsWidth.splice(t,1)}},setColumnStyle:function(e,t,i){var n={};if(n.minWidth=i+"px",n.maxWidth=i+"px",this.bodyOverflowX){if("left"===e.fixed&&(n.left=(t?this.columnsWidth[t-1]:0)+this.bodyScrollLeft+"px"),!this.isScrollRightEnd)t===this.columnsSort.findIndex((function(e){return"right"===e.fixed}))&&(n.borderLeftColor="transparent");"right"===e.fixed&&(n.right=(t!==this.columnsWidth.length-1?this.columnsWidth[t+1]:0)+(this.width-this.bodyWidth)-this.bodyScrollLeft+this.scrollYwidth+2+"px")}return n}},beforeDestroy:function(){this.$off("insert.column",this.headerColumn),this.$off("remove.column",this.removeColumn)}},B=new Set,U={data:function(){return{selecteds:[],selectionAll:!1,indeterminate:!1}},created:function(){this.$on("row.selection.change",this.rowSelectionChange),this.$on("all.selection.change",this.allselectionChange)},beforeDestroy:function(){this.$off("row.selection.change",this.rowSelectionChange),this.$off("all.selection.change",this.allselectionChange)},watch:{selecteds:function(e){var t=this;this.$emit("selection-change",e.map((function(e){return t.data[e]})));var i=this.selecteds.length,n=this.data.length;this.selectionAll=i===n,this.indeterminate=Boolean(i&&i<n)}},methods:{clearSelection:function(){this.selecteds=[]},toggleRowSelection:function(e,t){var i=this,n=this.data.findIndex((function(t){return i.isSame(t,e)}));-1!==n?this.toggleSelection(n,B.has(n),t):console.error("methods toggleRowSelection (row) is not find")},toggleAllSelection:function(){this.selectionAll=!this.selectionAll,this.allselectionChange(this.selectionAll)},rowSelectionChange:function(e,t){this.toggleSelection(e,!t),this.$emit("select",this.selecteds,this.data[e])},allselectionChange:function(e){this.selectionAll=e,this.indeterminate=!1,e?this.data.forEach((function(e,t){return B.add(t)})):B.clear(),this.updateSelected(),this.$emit("select-all",this.selecteds)},isSame:function(e,t){return JSON.stringify(e)===JSON.stringify(t)},toggleSelection:function(e,t,i){i?B.add(e):t?B.delete(e):B.add(e),this.updateSelected()},updateSelected:function(){this.selecteds=i(B)},isChecked:function(e){return this.selecteds.includes(e)}}},H={data:function(){return{leftWidth:0,rightWidth:0,columns:[],columnsWidth:[],columnCalcWidthLenght:0,width:0,bodyWidth:0,offset:0,bodyOverflowX:!1,bodyOverflowY:!1,bodyScrollLeft:0}},created:function(){A(window,"resize",this.resize,{passive:!0})},watch:{data:function(e){this.forceUpdate(),this.resize()}},computed:{tableClass:function(){var e="v-table";return this.bodyOverflowX&&(e+=" is-overflow-x"),this.bodyOverflowY&&(e+=" is-overflow-y"),this.border&&(e+=" is-border"),e},rowStyle:function(){var e={};e.width=this.width+"px";var t=this.leftWidth,i=this.rightWidth;return this.bodyOverflowX&&(t&&(e.paddingLeft="".concat(t+this.offset,"px")),i&&(e.paddingRight="".concat(i+this.offset,"px"))),e},scrollYwidth:function(){return this.bodyOverflowY?17:0},isScrollRightEnd:function(){return this.bodyWidth+this.bodyScrollLeft>this.width+this.scrollYwidth},minWidth:function(){return this.columnsWidth.reduce((function(e,t){return e+t}),0)}},methods:{resize:function(){this.bodyWidth=this.$el.getBoundingClientRect().width,this.width=this.bodyWidth>this.minWidth?this.bodyWidth:this.minWidth;var e;this.offset=this.bodyWidth>this.minWidth?(e=(this.bodyWidth-this.minWidth)/this.columnCalcWidthLenght,Math.floor(1e4*e)/1e4):0,this.bodyHeightChange()},bodyHeightChange:function(){var e=this;this.$nextTick((function(){var t=e.$el.querySelector(".vue-recycle-scroller"),i=t.scrollHeight,n=t.clientHeight;e.bodyOverflowY=i>n}))}},mounted:function(){this.resize()},beforeDestroy:function(){N(window,"resize",this.resize,{passive:!0})}},F=L({render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"v-popover",class:this.pClass,style:this.popoverStyle,on:{mouseenter:this.mouseenter,mouseleave:this.mouseleave}},[t("VSlot",{attrs:{content:this.content}}),this._v(" "),t("div",{ref:"arrow",staticClass:"v-popover__arrow"})],1)},staticRenderFns:[]},void 0,{name:"Popover",components:{VSlot:{props:["content"],render:function(e){return this.content}}},props:{show:{type:Boolean,default:!0},effect:{type:[String,Object],default:"dark"},data:{type:[String,Object,Array],default:""},placement:{type:String,default:"top"},borderColor:{type:String,default:"#ccc"},popoverClass:{type:String,default:""},reference:null,content:{type:[String,Array],default:function(){}}},data:function(){return{addedBody:!1,momentPlacement:this.placement}},computed:{pClass:function(){return"".concat(this.effect?"is-".concat(this.effect):"is-light","  v-popover__").concat(this.momentPlacement," ").concat(this.popoverClass," ").concat(this.show?"v-popover--visible":"v-popover--hidden")},popoverStyle:function(){var e={"--borderColor":"#ccc","--bgColor":"#fff","--color":"#303133"};if(!this.effect)return e;if("string"==typeof this.effect)switch(this.effect){case"light":e["--borderColor"]="#ccc",e["--bgColor"]="#fff",e["--color"]="#303133";break;case"dark":e["--borderColor"]="#303133",e["--bgColor"]="#303133",e["--color"]="#fff";break;case"info":e["--borderColor"]="#e6a23c",e["--bgColor"]="#e6a23c",e["--color"]="#fff";break;case"error":e["--borderColor"]="#f56c6c",e["--bgColor"]="#f56c6c",e["--color"]="#fff";break;default:e["--borderColor"]=this.effect,e["--bgColor"]=this.effect,e["--color"]="#fff"}else"object"===t(this.effect)?Array.isArray(this.effect)?console.error("effect 只能是对象或字符串"):(e["--borderColor"]=this.effect.borderColor?this.effect.borderColor:"#ccc",e["--bgColor"]=this.effect.backgroundColor?this.effect.backgroundColor:"#fff",e["--color"]=this.effect.olor?this.effect.olor:"#303133"):console.error("effect 只能是对象或字符串");return e}},watch:{show:function(e){var t=this;e&&setTimeout((function(){t.calculateCoordinate()}),0)}},mounted:function(){},beforeDestroy:function(){!function(e,t){var i=e.$refs[t];i&&i.$el&&i.$el.parentNode===document.body?document.body.removeChild(i.$el):i&&i.parentNode===document.body&&document.body.removeChild(i)}(this,"popover")},methods:{popoverAddedBody:function(){document.body.appendChild(this.$el),this.addedBody=!0},mouseenter:function(){this.$emit("mouseenter")},mouseleave:function(){this.$emit("mouseleave")},calculateCoordinate:function(){!this.addedBody&&this.popoverAddedBody();var e,t=this.$el,i=E(this.reference),n=E(t);this.changeDirection(n,i);var o=i.centerX-n.width/2;switch(this.momentPlacement){case"top":e=i.top-n.height-10;break;case"bottom":e=i.bottom+10;break;default:console.error("Wrong placement must top/bottom")}t.style.left=o+"px",t.style.top=e+"px"},changeDirection:function(e,t){var i=t.bottom+e.height+5;switch(this.placement){case"top":t.top-e.height-5<10?this.momentPlacement="bottom":this.momentPlacement="top";break;case"bottom":window.innerHeight-i<10?this.momentPlacement="top":this.momentPlacement="bottom"}}}},"data-v-49c7023f",!1,void 0,!1,void 0,void 0,void 0),M=L({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.tableClass},[i("div",{ref:"VHiddenColumns",staticClass:"v-hidden-columns"},[e._t("default")],2),e._v(" "),i("div",{staticClass:"v-table__header-wrapper"},[i("v-table-header",{ref:"TableHeader"}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.bodyOverflowY,expression:"bodyOverflowY"}],staticClass:"v-table__header-gutter"})],1),e._v(" "),i("div",{staticClass:"v-table__body-wrapper"},[i("DynamicScroller",{ref:"DynamicScroller",attrs:{data:e.data}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.bodyOverflowX&&e.bodyScrollLeft,expression:"bodyOverflowX && bodyScrollLeft"}],staticClass:"v-table__shadow-left",style:{left:e.leftWidth-2+"px"}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.bodyOverflowX&&e.rightWidth&&!e.isScrollRightEnd,expression:"bodyOverflowX && rightWidth && !isScrollRightEnd"}],staticClass:"v-table__shadow-right",style:{right:e.rightWidth+e.scrollYwidth+"px"}}),e._v(" "),i("Popover",{attrs:{show:e.show,reference:e.reference,content:e.popoverSlot}})],1)])},staticRenderFns:[]},void 0,{name:"VTable",components:{VTableHeader:n,DynamicScroller:j,Popover:F},mixins:[P,H,U],props:{data:{type:Array,default:function(){return[]}},height:{type:[String,Number],default:400},maxHeight:{type:[String,Number],default:0},highlightCurrentRow:{type:Boolean,default:!1},border:{type:Boolean,default:!1},keyField:{type:String,default:""},emptyText:{type:String,default:"暂无数据"},showOverflowTooltip:{type:Boolean,default:!1}},data:function(){return{show:!1,popoverSlot:null,reference:null,currentRow:null}},watch:{data:function(e){var t=this;if(this.data.length)if(this.keyField){var n=this.data.map((function(e){return e[t.keyField]}));this.data.length!==i(new Set(n)).length&&console.error("data数据 item 的 ".concat(this.keyField," 字段的值必须是唯一的"))}else console.error("v-table 必须设置 keyField 字段，且必须是 item 内具有唯一值的字段")}},provide:function(){return{table:this}},methods:{forceUpdate:function(){this.$refs.DynamicScroller.forceUpdate()}}},"data-v-7b4a242a",!1,void 0,!1,void 0,void 0,void 0),X={name:"VTableColumn",props:{type:String,width:{type:Number,default:0},renderHeader:{type:Function,default:function(){}},minWidth:{type:Number,default:0},label:{type:String,default:""},prop:{type:String,default:""},fixed:{type:String,default:""},className:{type:String,default:""},labelClassName:{type:String,default:""},showOverflowTooltip:{type:Boolean,default:!1}},data:function(){return{columnConfig:null}},inject:["table"],mounted:function(){var e=this,t=this.$slots.header,i=this.renderSlot;this.columnConfig=Object.keys(this.$options.props).reduce((function(t,i){return e.$watch(i,(function(t){e.columnConfig[i]=t})),t[i]=e[i],t}),{header:t,renderSlot:i}),this.table.$emit("insert.column",this.columnConfig)},destroyed:function(){this.table.$emit("remove.column",this.columnConfig)},methods:{renderSlot:function(e,t){return this.$scopedSlots.default?this.$scopedSlots.default(t):!!this.$slots.default&&this.$slots.default[0]}},render:function(e){return e("div",{},[])}},Y=[M,X],q=function(e){Y.forEach((function(t){e.component(t.name,t)}))};return"undefined"!=typeof window&&window.Vue&&q(window.Vue),e.Table=M,e.TableColumn=X,e.default=q,e}({});
